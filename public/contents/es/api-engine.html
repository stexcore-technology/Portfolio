<article>
    <h1>@stexcore/api-engine</h1>

    <p> <img src="https://img.shields.io/npm/v/@stexcore/api-engine?style=flat-square" alt="VersiÃ³n de NPM"> <img
            src="https://img.shields.io/github/license/stexcore/api-engine.svg" alt="Licencia"> <img
            src="https://img.shields.io/badge/TypeScript-%5E5.8.2-blue?style=flat-square" alt="TypeScript"> </p>

    <p><strong>Motor para desarrollar APIs rÃ¡pidamente utilizando Express como base.</strong><br> Esta biblioteca
        proporciona una forma modular y dinÃ¡mica de gestionar servicios, controladores, middlewares y esquemas de
        validaciÃ³n, permitiendo a los desarrolladores crear APIs sÃ³lidas y escalables con facilidad.</p>

    <hr>

    <h2>ğŸš€ InstalaciÃ³n</h2>
    <p>Instala el paquete desde NPM utilizando el siguiente comando:</p>
    <pre><code class="bash">npm install @stexcore/api-engine</code></pre>

    <hr>

    <h2>ğŸ“¦ Funcionalidades</h2>
    <table>
        <thead>
            <tr>
                <th>Funcionalidad</th>
                <th>DescripciÃ³n</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><strong>InicializaciÃ³n del Servidor</strong></td>
                <td>Crea y configura servidores fÃ¡cilmente con <code class="keyword">createServer</code>.</td>
            </tr>
            <tr>
                <td><strong>Carga DinÃ¡mica</strong></td>
                <td>Carga automÃ¡ticamente controladores, servicios, esquemas y middlewares.</td>
            </tr>
            <tr>
                <td><strong>Soporte de ValidaciÃ³n</strong></td>
                <td>Crea esquemas con <code class="keyword">createSchema</code> para validar solicitudes.</td>
            </tr>
            <tr>
                <td><strong>Servicios Modulares</strong></td>
                <td>Usa la clase <code class="keyword">Service</code> para definir componentes reutilizables con ciclos
                    de vida.</td>
            </tr>
            <tr>
                <td><strong>Ruteo de Controladores</strong></td>
                <td>Define mÃ©todos HTTP con la clase <code class="keyword">Controller</code>.</td>
            </tr>
        </tbody>
    </table>

    <hr>

    <h2>ğŸ§© CreaciÃ³n DinÃ¡mica de Endpoints</h2>

    <h3>ğŸ“‚ Controladores</h3>
    <p>Los controladores definen la lÃ³gica de los endpoints de tu API. Para asegurarte de que se carguen de manera
        dinÃ¡mica y correcta, sigue estas reglas:</p>
    <ul>
        <li><strong>UbicaciÃ³n:</strong> Los controladores deben almacenarse dentro del directorio <code
                class="string">controllers/</code>.</li>
        <li><strong>Nombre del Archivo:</strong> El nombre del archivo debe terminar con <code
                class="string">.controller.ts</code> o <code class="string">.controller.js</code>.</li>
        <li><strong>Estructura del Path:</strong> El nombre del archivo determina el endpoint. Por ejemplo: <ul>
                <li><code class="string">auth.controller.ts</code> â†’ <code class="string">/auth</code></li>
                <li><code class="string">auth.user.controller.ts</code> â†’ <code class="string">/auth/user</code></li>
            </ul>
        </li>
        <li><strong>Segmentos DinÃ¡micos:</strong> Para definir segmentos dinÃ¡micos en el endpoint, encierra el segmento
            entre corchetes (<code>[]</code>). Por ejemplo: <ul>
                <li><code class="string">auth.user.[id_user].controller.ts</code> â†’ <code
                        class="string">/auth/user/:id_user</code></li>
            </ul>
        </li>
    </ul>

    <h4>Ejemplo:</h4>
    <pre><code class="typescript"> import { RequestHandler } from "express"; import { Controller, Server } from "@stexcore/api-engine";

export default class UserController extends Controller { constructor(server: Server) { super(server); }

public GET?: RequestHandler = (req, res) => { res.json({ mensaje: ID del Usuario: ${req.params.id_user} }); }; } </code></pre>

    <h3>ğŸ“‚ Esquemas</h3>
    <p>Los esquemas definen las reglas de validaciÃ³n para las solicitudes entrantes. Su nomenclatura sigue las mismas
        reglas que los controladores, pero el nombre del archivo debe terminar con <code
            class="string">.schema.ts</code>.</p>

    <h4>Ejemplo:</h4>
    <pre><code class="typescript"> import { createSchema } from "@stexcore/api-engine"; import Joi from "joi";

export default createSchema({ GET: { query: Joi.object({ search: Joi.string().optional(), }), }, }); </code></pre>

    <h3>ğŸ“‚ Middlewares</h3>
    <p>Los middlewares manejan preocupaciones transversales (por ejemplo, registro, autenticaciÃ³n). Para asegurarte de
        que los middlewares se carguen correctamente:</p>
    <ul>
        <li><strong>UbicaciÃ³n:</strong> Los middlewares deben almacenarse dentro del directorio <code
                class="string">middlewares/</code>.</li>
        <li><strong>Nombre del Archivo:</strong> El nombre del archivo debe terminar con <code
                class="string">.middleware.ts</code> o <code class="string">.middleware.js</code>.</li>
        <li><strong>Subrutas:</strong> Para asociar middlewares con rutas especÃ­ficas, utiliza estructuras de carpetas.
            Los middlewares se aplicarÃ¡n a la ruta base en la que estÃ¡n definidos y a todas sus subrutas. Por ejemplo:
            <ul>
                <li>Middleware en <code class="string">middlewares/auth/log.middleware.ts</code> se aplicarÃ¡ a <code
                        class="string">/auth</code>, <code class="string">/auth/user</code>, <code
                        class="string">/auth/user/:id_user</code>, etc.</li>
            </ul>
        </li>
    </ul>

    <h4>Ejemplo:</h4>
    <pre><code class="typescript"> import { RequestHandler } from "express";

const logMiddleware: RequestHandler = (req, res, next) => { console.log(Solicitud a ${req.path}); next(); };

export default logMiddleware; </code></pre>

    <!-- SecciÃ³n de Services -->
    <h3>ğŸ“‚ Servicios</h3>
    <p>Los servicios encapsulan la lÃ³gica empresarial reutilizable. Deben seguir estas reglas:</p>
    <ul>
        <li><strong>UbicaciÃ³n:</strong> Los servicios deben almacenarse dentro del directorio <code
                class="string">services/</code>.</li>
        <li><strong>Nombre del Archivo:</strong> El nombre del archivo debe terminar con <code
                class="string">.service.ts</code>.</li>
    </ul>
    <p>Para usar un servicio, llama a <code class="keyword">server.getService()</code> con el constructor del servicio.
    </p>

    <h4>Ejemplo:</h4>
    <pre><code class="typescript"> import { Service } from "@stexcore/api-engine";

export default class AuthService extends Service { public authenticateUser(token: string) { // LÃ³gica de autenticaciÃ³n return token === "valid_token"; } } </code></pre>

    <hr>

    <h2>ğŸŒ Ejemplo Completo: Construyendo una API</h2>
    <h3>Estructura del Proyecto</h3>
    <pre><code class="bash"> src/ â”œâ”€â”€ controllers/ â”‚ â”œâ”€â”€ auth.user.[id_user].controller.ts â”œâ”€â”€ middlewares/ â”‚ â”œâ”€â”€ auth/user/log.middleware.ts â”œâ”€â”€ schemas/ â”‚ â”œâ”€â”€ auth.user.schema.ts â”œâ”€â”€ services/ â”‚ â”œâ”€â”€ auth.service.ts â”œâ”€â”€ index.ts </code></pre>

    <h4>Punto de Entrada</h4>
    <pre><code class="typescript"> import { createServer } from "@stexcore/api-engine";

const server = createServer({ port: 9001, workdir: __dirname }); server.initialize(); </code></pre>

    <hr>

    <h2>ğŸ› ï¸ Desarrollo</h2>
    <p>Si deseas contribuir o reportar problemas, visita nuestro repositorio en GitHub:<br> <a
            href="https://github.com/stexcore/api-engine">https://github.com/stexcore/api-engine</a> </p>

    <hr>
</article>